{"version":3,"file":"console-element.js","mappings":"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","sources":["webpack://@webqit/subscript/./src/console/Base.js","webpack://@webqit/subscript/./src/util.js","webpack://@webqit/subscript/webpack/bootstrap","webpack://@webqit/subscript/webpack/runtime/define property getters","webpack://@webqit/subscript/webpack/runtime/hasOwnProperty shorthand","webpack://@webqit/subscript/./src/console/CodeBlock.js","webpack://@webqit/subscript/./src/console/Interactable.js","webpack://@webqit/subscript/./src/console/Ref.js","webpack://@webqit/subscript/./src/console/Effect.js","webpack://@webqit/subscript/./src/console/Console.js"],"sourcesContent":["\n/**\n * @Console2\n */\nexport default Element => class Base extends Element {\n\n    constructor() {\n        super();\n        this.attachShadow( { mode: 'open' } );\n    }\n\n    connectedCallback() {\n        [].concat( this.css ).forEach( css => {\n            if ( css.includes( '{' ) && css.includes( ':' ) && css.includes( ';' ) ) {\n                let cssElement = this.shadowRoot.appendChild( document.createElement( 'style' ) );\n                cssElement.textContent = css;\n            } else {\n                let cssElement = this.shadowRoot.appendChild( document.createElement( 'link' ) );\n                cssElement.setAttribute( 'rel', 'stylesheet' );\n                cssElement.setAttribute( 'href', css );\n            }\n        } );\n    }\n\n    /**\n     * ----------\n     *  CSS\n     * ----------\n     */\n\n     get css() {\n        return []\n    }\n\n}","\n/**\n * @normalizeTabs\n */\nexport  function normalizeTabs( rawSource ) {\n    let rawSourceSplit = rawSource.split(/\\n/g);\n    if ( rawSourceSplit.length > 1 ) {\n        let possibleBodyIndentLevel = rawSourceSplit[ 1 ].split(/[^\\s]/)[0].length;\n        if ( possibleBodyIndentLevel ) {\n            return rawSourceSplit.map( ( line, i ) => {\n                if ( !i ) return line;\n                let possibleIndent = line.substring( 0, possibleBodyIndentLevel );\n                if ( !possibleIndent.trim().length ) {\n                    return line.substring( possibleBodyIndentLevel );\n                }\n                // Last line?\n                if ( possibleIndent.trim() === '}' && i === rawSourceSplit.length - 1 ) {\n                    return '}';\n                }\n                return line;\n            } ).join( \"\\n\" );\n        }\n    }\n    return rawSource;\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","\n/**\n * @imports\n */\nimport { normalizeTabs } from '../util.js';\nimport Base from './Base.js';\n\n/**\n * @CodeBlock\n */\nexport default CodeBlock => class extends Base( CodeBlock || HTMLElement ) {\n\n    static get observedAttributes() {\n        return [ 'name', 'editable', 'placeholder' ];\n    }\n\n    connectedCallback() {\n        let escape = html => html.replace( new RegExp( '&', 'g' ), '&amp;' ).replace( new RegExp( '<', 'g' ), '&lt;' );\n        this._lang = 'javascript';\n        this._editable = this.getAttribute( 'editable' );\n        this._styledBlock = this.getAttribute( 'styled-block' ) || 'pre';\n        // ----------------\n        this._div = document.createElement( 'div' );\n        this._preBlock = this._div.appendChild( document.createElement( 'pre' ) );\n        this._codeBlock = this._preBlock.appendChild( document.createElement( 'code' ) );\n        this._div.classList.add( 'line-numbers' );\n        //this._preBlock.setAttribute( 'data-label', 'Test' );\n        //this._div.classList.add( 'match-braces' );\n        //this._preBlock.setAttribute( 'data-line', '1' );\n        if ( this._lang ) {\n            this._preBlock.classList.add( 'language-' + this._lang );\n            this._codeBlock.classList.add( 'language-' + this._lang );\n        }\n        this._contentSlot = document.createElement( 'slot' );\n        this._contentSlot.setAttribute( 'aria-hidden', 'true' );\n        this._contentSlot.setAttribute( 'hidden', 'true' );\n        this._initialSlotEvent = false;\n        this._contentSlot.addEventListener( 'slotchange', () => {\n            let html = this._contentSlot.assignedNodes().reduce( ( _html, node ) => _html + ( node.outerHTML || node.nodeValue || '' ), '' );\n            if ( !this._initialSlotEvent ) {\n                html = normalizeTabs( html.trimStart() );\n                this._initialSlotEvent = true;\n            }\n            if ( this._textarea ) {\n                this._textarea.value = html;\n            }\n            this.source = escape( html );\n        } );\n        // ----------------\n        if ( this._editable === 'true' ) {\n            this._addEditor();\n        }\n        // ----------------\n        this.shadowRoot.append( this._contentSlot, this._textarea || '', this._div );\n        // ----------------\n        super.connectedCallback();\n    }\n\n    get source() {\n        return this._codeBlock.textContent;\n    }\n\n    set source( text ) {\n        if ( text.endsWith( \"\\n\" ) ) {\n            text += \" \";\n        }\n        this._codeBlock.innerHTML = '';\n        this._codeBlock.innerHTML = text;\n        this._highlightCodeBlock();\n        this._syncScrolling();\n    }\n\n    get name() {\n        return this._name;\n    }\n\n    set name( newValue ) {\n        return this.setAttribute( 'name', newValue );\n    }\n\n    get placeholder() {\n        return this._placeholder;\n    }\n\n    set placeholder( newValue ) {\n        return this.setAttribute( 'placeholder', newValue );\n    }\n\n    get editable() {\n        return this._editable;\n    }\n\n    set editable( newValue ) {\n        return this.setAttribute( 'editable', newValue === true ? 'true' : ( newValue === false ? 'false' : newValue ) );\n    }\n\n    _addEditor() {\n        this._placeholder = this.getAttribute( 'placeholder' ),\n        this._name = this.getAttribute( 'name' );\n        this._textarea = this._div.appendChild( document.createElement( 'textarea' ) );\n        this._textarea.placeholder = this._placeholder || this._lang;\n        this._textarea.spellcheck = false;\n        this._textarea.name = this._name || '';\n        this._textarea.value = this._codeBlock.textContent;\n        this._preBlock.setAttribute( 'aria-hidden', 'true' );\n        this._scrollBlock = this.getAttribute( 'scroll-block' ) === 'pre' ? this._preBlock : this._codeBlock;\n        this._textarea.addEventListener( 'input', e => { this.source = e.target.value } );\n        this._textarea.addEventListener( 'input', () => this._syncScrolling() );\n        this._textarea.addEventListener( 'keydown', e => this._handleTabKeyEvent( e ) );\n    }\n\n    _handleTabKeyEvent( e ) {\n        if ( !this._textarea ) return;\n        if ( e.key !== 'Tab' ) return;\n        e.preventDefault()\n        let text = this._textarea.value,\n            selectionStart = this._textarea.selectionStart, // where cursor moves after tab - moving forward by 1 indent\n            selectionEnd = this._textarea.selectionEnd; // where cursor moves after tab - moving forward by 1 indent\n        if ( selectionStart === selectionEnd ) {\n            let beforeSelection = text.slice( 0, selectionStart ); // text before tab\n            let afterSelection = text.slice( selectionEnd, text.length ); // text after tab\n            let cursorLocation = selectionEnd + 1; // where cursor moves after tab - moving forward by 1 char to after tab\n            // Add tab char\n            this._textarea.value = beforeSelection + \"\\t\" + afterSelection;\n            // Move cursor\n            this._textarea.selectionStart = cursorLocation;\n            this._textarea.selectionEnd = cursorLocation;\n        } else {\n            let lines = text.split( \"\\n\" ),\n                letter_i = 0,\n                numberIndents = 0,\n                firstLineIndents = 0;\n            for ( let i = 0; i < lines.length; i ++ ) {\n                letter_i += lines[ i ].length;\n                if( selectionStart < letter_i && selectionEnd > letter_i - lines[ i ].length ) {\n                    if( e.shiftKey ) {\n                        if ( lines[ i ][ 0 ] === \"\\t\" ) {\n                            lines[ i ] = lines[i].slice( 1 );\n                            if ( numberIndents === 0 ) firstLineIndents --;\n                            numberIndents --;\n                        }\n                    } else {\n                        lines[ i ] = \"\\t\" + lines[ i ];\n                        if ( numberIndents === 0 ) firstLineIndents ++;\n                        numberIndents ++;\n                    }\n                }\n            }\n            this._textarea.value = lines.join( \"\\n\" );\n            // Move cursor\n            this._textarea.selectionStart = selectionStart + firstLineIndents;\n            this._textarea.selectionEnd = selectionEnd + numberIndents;\n        }\n        this.source = this._textarea.value;\n    }\n\n    _syncScrolling() {\n        if ( !this._scrollBlock ) return;\n        this._scrollBlock.scrollTop = this._textarea.scrollTop;\n        this._scrollBlock.scrollLeft = this._textarea.scrollLeft;\n    }\n\n    _highlightCodeBlock() {\n        Prism.highlightElement( this._codeBlock );\n    }\n\n    disconnectedCallback() {\n        Array.from( this.shadowRoot.childNodes ).forEach( node => node.remove() );\n    }\n\n    attributeChangedCallback( name, oldValue, newValue ) {\n        if ( !this.childNodes.length ) {\n            return;\n        }\n        switch ( name ) {\n            case 'name':\n                this._name = newValue;\n                this._textarea.name = newValue;\n                break;\n            case 'placeholder':\n                this._placeholder = newValue;\n                this._textarea.placeholder = newValue;\n                break;\n            case 'editable':\n                this._editable = newValue;\n                if ( this._textarea ) {\n                    this._textarea.disabled = newValue === 'false';\n                } else if ( newValue === 'true' ) {\n                    this._addEditor();\n                }\n                if ( newValue === 'true' ) {\n                    this._textarea.focus();\n                }\n                break;\n        }\n    }\n\n    /**\n     * ----------\n     *  CSS\n     * ----------\n     */\n\n    get css() {\n        return [\n            `https://unpkg.com/@webqit/subscript/src/console/assets/prism.css`,\n            `https://unpkg.com/@webqit/subscript/src/console/assets/vs-code-dark.css`,\n            `\n            * {\n                -webkit-box-sizing: border-box;\n                -moz-box-sizing: border-box;\n                box-sizing: border-box;\n            }\n            :host {\n                /* Allow other elems to be inside */\n                position: relative;\n                top: 0;\n                left: 0;\n                display: block;\n                \n                /* Normal inline styles */\n                \n                font-size: 0.8rem;\n                font-family: monospace;\n                line-height: 1.2rem;\n                tab-size: 2;\n                caret-color: darkgrey;\n                white-space: pre;\n                overflow: hidden;\n            }\n            \n            textarea, ${ this._styledBlock } {\n                /* Both elements need the same text and space styling so they are directly on top of each other */\n                margin: 0px !important;\n                padding-top: var(--vertical-padding, 1.5rem) !important;\n                padding-bottom: var(--vertical-padding, 1.5rem) !important;\n                padding-left: var(--horizontal-padding, 1rem) !important;\n                padding-right: var(--horizontal-padding, 1rem) !important;\n                border: 0 !important;\n                width: 100% !important;\n                height: 100% !important;\n            }\n            ${ this._styledBlock === 'code' ? 'pre' : 'code' } {\n                margin: 0px !important;\n                border: 0px !important;\n                padding: 0px !important;\n                overflow: auto !important;\n                width: 100% !important;\n                height: 100% !important;\n            }\n            .line-numbers :is(textarea, pre[class*=language-]) {\n                padding-left:3.8rem !important;\n            }\n            textarea, pre, pre * {\n                /* Also add text styles to highlighing tokens */\n                font-size: inherit !important;\n                font-family: inherit !important;\n                line-height: inherit !important;\n                tab-size: inherit !important;\n            }\n            \n            textarea, pre {\n                /* In the same place */\n                position: absolute;\n                top: 0;\n                left: 0;\n            }\n            textarea[disabled] {\n                pointer-events: none !important;\n            }\n            \n            /* Move the textarea in front of the result */\n            \n            textarea {\n                z-index: 1;\n            }\n            pre {\n                z-index: 0;\n            }\n            \n            /* Make textarea almost completely transparent */\n            \n            textarea {\n                color: transparent;\n                background: transparent;\n                caret-color: inherit!important; /* Or choose your favourite color */\n            }\n            \n            /* Can be scrolled */\n            textarea, pre {\n                overflow: auto !important;\n            \n                white-space: inherit !important;\n                word-spacing: normal !important;\n                word-break: normal !important;\n                word-wrap: normal !important;\n            }\n            \n            /* No resize on textarea; stop outline */\n            textarea {\n                resize: none;\n                outline: none !important;\n            }\n            .line-numbers-rows {\n                border: none !important;\n                color: dimgray !important;\n            }\n            `,\n        ]\n    }\n\n}\n","\n/**\n * @Path\n */\nexport default Interactable => class extends ( Interactable || class {} ) {\n\n    setStateCallback( type, state, value, duration = 100, callback ) {\n        if ( !this._timeouts ) {\n            this._timeouts = {};\n        }\n        if ( !( type in this._timeouts ) ) {\n            this._timeouts[ type ] = [];\n        }\n        if ( value ) {\n            if ( !this._timeouts[ type ].length ) {\n                callback();\n            }\n            if ( duration ) {\n                this._timeouts[ type ].unshift( setTimeout( () => this.setState( type, state, false ), duration ) );\n            } else {\n                this._timeouts[ type ].unshift( null );\n            }\n            if ( this._related ) {\n                this._related.setState( type, state, true, duration );\n            }\n        } else {\n            this._timeouts[ type ].shift();\n            if ( !this._timeouts[ type ].length ) {\n                callback();\n                if ( this._related ) {\n                    this._related.setState( type, state, false );\n                }\n            }\n        }\n    }\n\n}","/**\n * @imports\n */\nimport Interactable from './Interactable.js';\n\n/**\n * @Ref\n */\nexport default class Ref extends Interactable() {\n\n    bind( binding ) {\n        Object.assign( this, binding );\n\n        this.fullPaths = [];\n        this.$fullPaths = [];\n        if ( this.ownerProduction.assignee ) {\n            this.ownerProduction.assignee.refs.forEach( ref => {\n                if ( !ref.depth ) return;\n                this.fullPaths.push( [ ...this.path, ...ref.depth ] );\n            } );\n        }\n        if ( !this.fullPaths.length ) {\n            this.fullPaths = [ this.path ];\n        }\n\n        this.fullPaths.forEach( ( fullPath, pathIndex ) => {\n            this.$fullPaths.push( fullPath.map( element => ( 'memoId' in element ) ? `[[computed]]` : element.name ).join( '.' ) );\n            \n            fullPath.forEach( element => {\n                element.anchor.classList.add( 'ref-identifier' );\n                element.anchor.classList.add( this.subscriptions ? 'affected' : 'cause' );\n                let existingTitle = element.anchor.getAttribute( `title` );\n                let currentTitle = '> ' \n                    + this.$fullPaths[ pathIndex ] \n                    + ( this.subscriptions ? ' (Creates a signal)' : ' (Receives a signal)' );\n                element.anchor.setAttribute( `title`, existingTitle ? existingTitle + \"\\n\" + currentTitle : currentTitle );\n            });\n\n            this._on( pathIndex, 'mouseenter', () => {\n                this._setState( pathIndex, 'path', 'hover', true, 0 );\n            } )._on( pathIndex, 'mouseleave', () => {\n                this._setState( pathIndex, 'path', 'hover', false );\n            } );\n\n            if ( this.subscriptions ) {\n                this._on( pathIndex, 'click', () => {\n                    this.ownerProduction.ownerEffect.signal( fullPath );\n                } );\n            }\n        } );\n    }\n\n    _setState( pathIndex, type, state, value, duration = 100 ) {\n        this.setStateCallback( pathIndex + '|' + type, state, value, duration, () => {\n            if ( value ) {\n                this.fullPaths[ pathIndex ].forEach( element => element.anchor.classList.add( `${ type }-${ state }` ) );\n            } else {\n                this.fullPaths[ pathIndex ].forEach( element => element.anchor.classList.remove( `${ type }-${ state }` ) );\n            }\n        } );\n    }\n\n    setState( type, state, value, duration = 100 ) {\n        let [ _index, _type ] = type.split( '|' );\n        if ( _type !== undefined ) {\n            return this._setState( _index, _type, state, value, duration );\n        }\n        this.fullPaths.forEach( ( p, i ) => {\n            this._setState( i, type, state, value, duration );\n        } );\n    }\n\n    _on( pathIndex, eventName, callback ) {\n        this.fullPaths[ pathIndex ].forEach( pathElement => pathElement.anchor.addEventListener( eventName, callback.bind( this ) ) );\n        return this;\n    }\n\n    on( eventName, callback ) {\n        this.fullPaths.forEach( ( p, i ) => {\n            this._on( i, eventName, callback );\n        } );\n    }\n}","/**\n * @imports\n */\nimport Interactable from './Interactable.js';\nimport Ref from './Ref.js';\n\n/**\n * @Path\n */\nexport default class Effect extends Interactable( HTMLElement ) {\n\n    bind( binding ) {\n        Object.assign( this, binding );\n        if ( !this.graph ) return;\n        \n        if ( this.childEffects ) {\n            this.childEffects.forEach( childEffect => {\n                childEffect.replaceWith( ...childEffect.childNodes );\n            } );\n        }\n        this.childEffects = new Map;\n        this._textNodes = this.getTextNodes();\n        for ( let effectId in this.graph.childEffects ) {\n            let graph = this.graph.childEffects[ effectId ];\n            let childInstance = this.createChildEffect( { parentEffect: this, graph } );\n            this.childEffects.set( graph.id, childInstance );\n        }\n\n        this.affecteds = new Map;\n        this.causes = new Map;\n        if ( this.refAnchors ) {\n            for ( let anchorId in this.refAnchors ) {\n                let anchor = this.refAnchors[ anchorId ];\n                anchor.replaceWith( ...anchor.childNodes );\n            }\n        }\n        this.refAnchors = {};\n        this._textNodes = this.getTextNodes();\n        const renderRefs = type => {\n            for ( let productionId in this.graph[ type ] ) {\n                let productionInstance = this.createProduction( { ownerEffect: this, ...this.graph[ type ][ productionId ] } );\n                this[ type ].set( productionId, productionInstance );\n            }\n        };\n        renderRefs( 'affecteds' );\n        renderRefs( 'causes' );\n\n        this.on( 'mouseenter', () => {\n            this.setState( 'block', 'hover', true, 0 );\n        } ).on( 'mouseleave', () => {\n            this.setState( 'block', 'hover', false );\n        } );\n        this.observe( ( event, refs ) => {\n            this.setState( 'block', 'runtime-active', true, 100 );\n            refs.forEach( ref => {\n                let productionInstance = this.causes.get( ref.productionId + '' );\n                if ( !productionInstance ) return;\n                productionInstance.refs.get( ref.id ).setState( 'path', 'runtime-active', true, 100 );\n            } );\n        } );\n    }\n\n    get program() {\n        if ( this.parentEffect ) return this.parentEffect.program;\n        return this.runtime;\n    }\n\n    signal( ...refs ) {\n        let runtimeEffect = this.program.locate( this.graph.lineage );\n        if ( !runtimeEffect ) return;\n        return runtimeEffect.signal( ...refs );\n    }\n\n    observe( callback ) {\n        return this.program.observe( this.graph.lineage, callback );\n    }\n\n    createChildEffect( childBinding ) {\n        let childInstance = document.createElement( 'subscript-effect' );\n        this.insertNode( childInstance, childBinding.graph.loc, 'effect' );\n        childInstance.bind( childBinding );\n        return childInstance;\n    }\n\n    createProduction( productionBinding ) {\n        let productionInstance = { ...productionBinding, refs: new Map };\n        if ( 'assignee' in productionBinding ) {\n            productionInstance.assignee = this.affecteds.get( productionBinding.assignee + '' );\n        }\n        for ( let refDef of productionBinding.refs ) {\n            let refInstance = this.createRef( { ownerProduction: productionInstance, ...refDef } );\n            productionInstance.refs.set( refDef.id, refInstance );\n        }\n        return productionInstance;\n    }\n\n    createRef( refBinding ) {\n        let refInstance = new Ref;\n        const createAnchor = element => {\n            let [ start, end ] = element.loc, anchorId = start + '-' + end;\n            let anchor = this.refAnchors[ anchorId ];\n            if ( !anchor ) {\n                anchor = document.createElement( 'span' );\n                this.insertNode( anchor, [ start, end ], 'ref' );\n                this.refAnchors[ anchorId ] = anchor;\n            }\n            return anchor;\n        };\n        refBinding = { ...refBinding, path: refBinding.path.map( element => {\n            let anchor = createAnchor( element );\n            return { anchor, ...element };\n        } ), };\n        if ( refBinding.depth ) {\n            refBinding.depth = refBinding.depth.map( element => {\n                let anchor = createAnchor( element );\n                return { anchor, ...element };\n            } );\n        }\n        refInstance.bind( refBinding );\n        return refInstance;\n    }\n\n    insertNode( node, loc, type ) {\n        let [ start, end ] = loc;\n        let ownLocStart = this.graph.loc ? this.graph.loc[ 0 ] : 0;\n        let [ startOffsetNode, startOffset ] = this.resolveOffset( start - ownLocStart ),\n            [ endOffsetNode, endOffset ] = this.resolveOffset( end - ownLocStart, false );\n        let range = new Range;\n        if ( type === 'effect' ) {\n            if ( startOffset === 0 \n            && startOffsetNode.parentNode.nodeName === 'SPAN'  ) {\n                range.setStartBefore( startOffsetNode.parentNode );\n            } else {\n                range.setStart( startOffsetNode, startOffset );\n            }\n            if ( endOffset === ( endOffsetNode.nodeValue || '' ).length \n            && endOffsetNode.parentNode.nodeName === 'SPAN' ) {\n                range.setEndAfter( endOffsetNode.parentNode );\n            } else {\n                range.setEnd( endOffsetNode, endOffset );\n            }\n        } else {\n            range.setStart( startOffsetNode, startOffset );\n            range.setEnd( endOffsetNode, endOffset );\n        }\n        range.surroundContents( node );\n        return node;\n    }\n\n    resolveOffset( offset, isStart = true ) {\n        return this._textNodes.reduce( ( [ prevNodeDef, final, prevSum ], nodeDef ) => {\n            if ( final === null ) {\n                let currentSum = prevSum + nodeDef.length;\n                if ( offset <= currentSum && !nodeDef.isBlank ) {\n                    let subOffset = offset - prevSum;\n                    if ( !isStart && subOffset === 0 ) {\n                        // We must not end at the start of a text node\n                        return [ prevNodeDef.node, prevNodeDef.length ];\n                    }\n                    if ( ( !isStart || subOffset < nodeDef.length ) ) {\n                        // We're sure not starting at the end of a text node\n                        return [ nodeDef.node, subOffset ];\n                    }\n                }\n                [ prevNodeDef, final, prevSum ] = [ nodeDef, final, currentSum ];\n            }\n            return [ prevNodeDef, final, prevSum ];\n        }, [ null, null, 0 ] );\n    }\n\n    getTextNodes( from = this ) {\n        let rejectScriptTextFilter = {\n            acceptNode: function( node ) {\n                if ( node.parentNode.nodeName === 'SCRIPT' ) return;\n                return window.NodeFilter.FILTER_ACCEPT;\n            }\n        };\n        let walker = window.document.createTreeWalker( from || this, window.NodeFilter.SHOW_TEXT, rejectScriptTextFilter, false );\n        let textNodes = [], node;\n        while( node = walker.nextNode() ) {\n            let textContent = node.nodeValue || '';\n            textNodes.push( { node, length: textContent.length, isBlank: textContent.trim().length === 0 } );\n        }\n        return textNodes;\n    }\n\n    setState( type, state, value, duration = 100 ) {\n        if ( value && this.parentEffect ) {\n            this.parentEffect.setState( type, state, false );\n        }\n        this.setStateCallback( type, state, value, duration, () => {\n            if ( value ) {\n                this.classList.add( `${ type }-${ state }` );\n            } else {\n                this.classList.remove( `${ type }-${ state }` );\n            }\n        } );\n    }\n\n    on( eventName, callback ) {\n        this.addEventListener( eventName, callback.bind( this ) );\n        return this;\n    }\n\n}","\n/**\n * @imports\n */\nimport CodeBlock from './CodeBlock.js';\nimport Effect from './Effect.js';\n\n/**\n * @Console\n */\nexport default class Console extends CodeBlock( Effect ) {\n\n    bind( subscriptFunction, autoRender = true ) {\n        if ( autoRender ) {\n            // Sets both textarea and codeBlock\n            this.innerHTML = subscriptFunction.originalSource;\n        }\n        setTimeout( () => {\n            if ( !this._codeBlock.textContent.length ) return;\n            let runtime = subscriptFunction.runtime;\n            super.bind( { runtime, graph: runtime.graph } );\n        }, 0 );\n    }\n\n    createRef( refBinding ) { }\n\n    getTextNodes( from = null ) {\n        return super.getTextNodes( from || this._codeBlock );\n    }\n\n    /**\n     * ----------\n     *  CSS\n     * ----------\n     */\n\n    get css() {\n        return super.css.concat([\n            `\n            .ref-identifier.path-runtime-active {\n                text-decoration: underline;\n            }\n            .ref-identifier:is(.path-runtime-active) {\n            }\n\n            .ref-identifier.cause {\n                cursor: default;\n            }\n\n            .ref-identifier.affected {\n                cursor: pointer;\n            }\n\n            .ref-identifier.cause:is(.path-hover, .path-runtime-active) {\n                color: aqua;\n            }\n            .token.keyword .ref-identifier.cause:is(.path-hover, .path-runtime-active) {\n                color: mediumturquoise;\n            }\n            \n            .ref-identifier.affected:is(.path-hover, .path-runtime-active) {\n                color: yellowgreen;\n                text-decoration: underline;\n            }\n\n            .ref-identifier.cause.affected:is(.path-hover, .path-runtime-active) {\n                color: lightgreen;\n            }\n\n            subscript-effect.block-hover,\n            subscript-effect.block-runtime-active {\n                outline: 1px dashed gray;\n                outline-offset: 0.1rem;\n                border-radius: 0.1rem;\n                /*\n                background-color: darkblue;\n                */\n            }\n            subscript-effect.block-runtime-active {\n                background-color: rgba(100, 100, 100, 0.35);\n            }\n            `\n        ]);\n    }\n\n}\n\n/**\n * @define\n */\ncustomElements.define( 'subscript-codeblock', CodeBlock() );\ncustomElements.define( 'subscript-effect', Effect );\ncustomElements.define( 'subscript-console', Console );\n"],"names":["Element","constructor","super","this","attachShadow","mode","connectedCallback","concat","css","forEach","includes","shadowRoot","appendChild","document","createElement","textContent","cssElement","setAttribute","normalizeTabs","rawSource","rawSourceSplit","split","length","possibleBodyIndentLevel","map","line","i","possibleIndent","substring","trim","join","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","CodeBlock","Base","HTMLElement","observedAttributes","_lang","_editable","getAttribute","_styledBlock","_div","_preBlock","_codeBlock","classList","add","_contentSlot","_initialSlotEvent","addEventListener","html","assignedNodes","reduce","_html","node","outerHTML","nodeValue","trimStart","_textarea","value","source","replace","RegExp","escape","_addEditor","append","text","endsWith","innerHTML","_highlightCodeBlock","_syncScrolling","name","_name","newValue","placeholder","_placeholder","editable","spellcheck","_scrollBlock","e","target","_handleTabKeyEvent","preventDefault","selectionStart","selectionEnd","beforeSelection","slice","afterSelection","cursorLocation","lines","letter_i","numberIndents","firstLineIndents","shiftKey","scrollTop","scrollLeft","Prism","highlightElement","disconnectedCallback","Array","from","childNodes","remove","attributeChangedCallback","oldValue","disabled","focus","Interactable","setStateCallback","type","state","duration","callback","_timeouts","unshift","setTimeout","setState","_related","shift","Ref","bind","binding","assign","fullPaths","$fullPaths","ownerProduction","assignee","refs","ref","depth","push","path","fullPath","pathIndex","element","anchor","subscriptions","existingTitle","currentTitle","_on","_setState","ownerEffect","signal","_index","_type","p","eventName","pathElement","on","Effect","graph","childEffects","childEffect","replaceWith","Map","_textNodes","getTextNodes","effectId","childInstance","createChildEffect","parentEffect","set","id","affecteds","causes","refAnchors","anchorId","renderRefs","productionId","productionInstance","createProduction","observe","event","program","runtime","runtimeEffect","locate","lineage","childBinding","insertNode","loc","productionBinding","refDef","refInstance","createRef","refBinding","createAnchor","start","end","ownLocStart","startOffsetNode","startOffset","resolveOffset","endOffsetNode","endOffset","range","Range","parentNode","nodeName","setStartBefore","setStart","setEndAfter","setEnd","surroundContents","offset","isStart","prevNodeDef","final","prevSum","nodeDef","currentSum","isBlank","subOffset","rejectScriptTextFilter","acceptNode","window","NodeFilter","FILTER_ACCEPT","walker","createTreeWalker","SHOW_TEXT","textNodes","nextNode","Console","subscriptFunction","autoRender","originalSource","customElements","define"],"sourceRoot":""}