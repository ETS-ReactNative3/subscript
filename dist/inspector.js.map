{"version":3,"file":"inspector.js","mappings":"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","sources":["webpack://@webqit/subscript/./src/console/Base.js","webpack://@webqit/subscript/./src/console/CodeBlock.js","webpack://@webqit/subscript/./src/console/Interactable.js","webpack://@webqit/subscript/./src/console/Ref.js","webpack://@webqit/subscript/./src/console/Effect.js","webpack://@webqit/subscript/./src/console/Console.js","webpack://@webqit/subscript/./src/console/index.js","webpack://@webqit/subscript/./src/util.js","webpack://@webqit/subscript/webpack/bootstrap","webpack://@webqit/subscript/webpack/runtime/define property getters","webpack://@webqit/subscript/webpack/runtime/hasOwnProperty shorthand","webpack://@webqit/subscript/./src/console/Inspector.js"],"sourcesContent":["\n/**\n * @Console2\n */\nexport default Element => class Base extends Element {\n\n    constructor() {\n        super();\n        this.attachShadow( { mode: 'open' } );\n    }\n\n    connectedCallback() {\n        [].concat( this.css ).forEach( css => {\n            if ( css.includes( '{' ) && css.includes( ':' ) && css.includes( ';' ) ) {\n                let cssElement = this.shadowRoot.appendChild( document.createElement( 'style' ) );\n                cssElement.textContent = css;\n            } else {\n                let cssElement = this.shadowRoot.appendChild( document.createElement( 'link' ) );\n                cssElement.setAttribute( 'rel', 'stylesheet' );\n                cssElement.setAttribute( 'href', css );\n            }\n        } );\n    }\n\n    /**\n     * ----------\n     *  CSS\n     * ----------\n     */\n\n     get css() {\n        return []\n    }\n\n}","\n/**\n * @imports\n */\nimport { normalizeTabs } from '../util.js';\nimport Base from './Base.js';\n\n/**\n * @CodeBlock\n */\nexport default CodeBlock => class extends Base( CodeBlock || HTMLElement ) {\n\n    static get observedAttributes() {\n        return [ 'name', 'editable', 'placeholder' ];\n    }\n\n    connectedCallback() {\n        let escape = html => html.replace( new RegExp( '&', 'g' ), '&amp;' ).replace( new RegExp( '<', 'g' ), '&lt;' );\n        this._lang = 'javascript';\n        this._editable = this.getAttribute( 'editable' );\n        this._styledBlock = this.getAttribute( 'styled-block' ) || 'pre';\n        // ----------------\n        this._div = document.createElement( 'div' );\n        this._preBlock = this._div.appendChild( document.createElement( 'pre' ) );\n        this._codeBlock = this._preBlock.appendChild( document.createElement( 'code' ) );\n        this._div.classList.add( 'line-numbers' );\n        //this._preBlock.setAttribute( 'data-label', 'Test' );\n        //this._div.classList.add( 'match-braces' );\n        //this._preBlock.setAttribute( 'data-line', '1' );\n        if ( this._lang ) {\n            this._preBlock.classList.add( 'language-' + this._lang );\n            this._codeBlock.classList.add( 'language-' + this._lang );\n        }\n        this._contentSlot = document.createElement( 'slot' );\n        this._contentSlot.setAttribute( 'aria-hidden', 'true' );\n        this._contentSlot.setAttribute( 'hidden', 'true' );\n        this._initialSlotEvent = false;\n        this._contentSlot.addEventListener( 'slotchange', () => {\n            let html = this._contentSlot.assignedNodes().reduce( ( _html, node ) => _html + ( node.outerHTML || node.nodeValue || '' ), '' );\n            if ( !this._initialSlotEvent ) {\n                html = normalizeTabs( html.trimStart() );\n                this._initialSlotEvent = true;\n            }\n            if ( this._textarea ) {\n                this._textarea.value = html;\n            }\n            this.source = escape( html );\n        } );\n        // ----------------\n        if ( this._editable === 'true' ) {\n            this._addEditor();\n        }\n        // ----------------\n        this.shadowRoot.append( this._contentSlot, this._textarea || '', this._div );\n        // ----------------\n        super.connectedCallback();\n    }\n\n    get source() {\n        return this._codeBlock.textContent;\n    }\n\n    set source( text ) {\n        if ( text.endsWith( \"\\n\" ) ) {\n            text += \" \";\n        }\n        this._codeBlock.innerHTML = '';\n        this._codeBlock.innerHTML = text;\n        this._highlightCodeBlock();\n        this._syncScrolling();\n    }\n\n    get name() {\n        return this._name;\n    }\n\n    set name( newValue ) {\n        return this.setAttribute( 'name', newValue );\n    }\n\n    get placeholder() {\n        return this._placeholder;\n    }\n\n    set placeholder( newValue ) {\n        return this.setAttribute( 'placeholder', newValue );\n    }\n\n    get editable() {\n        return this._editable;\n    }\n\n    set editable( newValue ) {\n        return this.setAttribute( 'editable', newValue === true ? 'true' : ( newValue === false ? 'false' : newValue ) );\n    }\n\n    _addEditor() {\n        this._placeholder = this.getAttribute( 'placeholder' ),\n        this._name = this.getAttribute( 'name' );\n        this._textarea = this._div.appendChild( document.createElement( 'textarea' ) );\n        this._textarea.placeholder = this._placeholder || this._lang;\n        this._textarea.spellcheck = false;\n        this._textarea.name = this._name || '';\n        this._textarea.value = this._codeBlock.textContent;\n        this._preBlock.setAttribute( 'aria-hidden', 'true' );\n        this._scrollBlock = this.getAttribute( 'scroll-block' ) === 'pre' ? this._preBlock : this._codeBlock;\n        this._textarea.addEventListener( 'input', e => { this.source = e.target.value } );\n        this._textarea.addEventListener( 'input', () => this._syncScrolling() );\n        this._textarea.addEventListener( 'keydown', e => this._handleTabKeyEvent( e ) );\n    }\n\n    _handleTabKeyEvent( e ) {\n        if ( !this._textarea ) return;\n        if ( e.key !== 'Tab' ) return;\n        e.preventDefault()\n        let text = this._textarea.value,\n            selectionStart = this._textarea.selectionStart, // where cursor moves after tab - moving forward by 1 indent\n            selectionEnd = this._textarea.selectionEnd; // where cursor moves after tab - moving forward by 1 indent\n        if ( selectionStart === selectionEnd ) {\n            let beforeSelection = text.slice( 0, selectionStart ); // text before tab\n            let afterSelection = text.slice( selectionEnd, text.length ); // text after tab\n            let cursorLocation = selectionEnd + 1; // where cursor moves after tab - moving forward by 1 char to after tab\n            // Add tab char\n            this._textarea.value = beforeSelection + \"\\t\" + afterSelection;\n            // Move cursor\n            this._textarea.selectionStart = cursorLocation;\n            this._textarea.selectionEnd = cursorLocation;\n        } else {\n            let lines = text.split( \"\\n\" ),\n                letter_i = 0,\n                numberIndents = 0,\n                firstLineIndents = 0;\n            for ( let i = 0; i < lines.length; i ++ ) {\n                letter_i += lines[ i ].length;\n                if( selectionStart < letter_i && selectionEnd > letter_i - lines[ i ].length ) {\n                    if( e.shiftKey ) {\n                        if ( lines[ i ][ 0 ] === \"\\t\" ) {\n                            lines[ i ] = lines[i].slice( 1 );\n                            if ( numberIndents === 0 ) firstLineIndents --;\n                            numberIndents --;\n                        }\n                    } else {\n                        lines[ i ] = \"\\t\" + lines[ i ];\n                        if ( numberIndents === 0 ) firstLineIndents ++;\n                        numberIndents ++;\n                    }\n                }\n            }\n            this._textarea.value = lines.join( \"\\n\" );\n            // Move cursor\n            this._textarea.selectionStart = selectionStart + firstLineIndents;\n            this._textarea.selectionEnd = selectionEnd + numberIndents;\n        }\n        this.source = this._textarea.value;\n    }\n\n    _syncScrolling() {\n        if ( !this._scrollBlock ) return;\n        this._scrollBlock.scrollTop = this._textarea.scrollTop;\n        this._scrollBlock.scrollLeft = this._textarea.scrollLeft;\n    }\n\n    _highlightCodeBlock() {\n        Prism.highlightElement( this._codeBlock );\n    }\n\n    disconnectedCallback() {\n        Array.from( this.shadowRoot.childNodes ).forEach( node => node.remove() );\n    }\n\n    attributeChangedCallback( name, oldValue, newValue ) {\n        if ( !this.childNodes.length ) {\n            return;\n        }\n        switch ( name ) {\n            case 'name':\n                this._name = newValue;\n                this._textarea.name = newValue;\n                break;\n            case 'placeholder':\n                this._placeholder = newValue;\n                this._textarea.placeholder = newValue;\n                break\n            case 'editable':\n                this._editable = newValue;\n                if ( this._textarea ) {\n                    this._textarea.disabled = newValue === 'false';\n                } else if ( newValue === 'true' ) {\n                    this._addEditor();\n                }\n                if ( newValue === 'true' ) {\n                    this._textarea.focus();\n                }\n        }\n    }\n\n    /**\n     * ----------\n     *  CSS\n     * ----------\n     */\n\n    get css() {\n        return [\n            `https://unpkg.com/@webqit/subscript/src/console/assets/prism.css`,\n            `https://unpkg.com/@webqit/subscript/src/console/assets/vs-code-dark.css`,\n            `\n            * {\n                -webkit-box-sizing: border-box;\n                -moz-box-sizing: border-box;\n                box-sizing: border-box;\n            }\n            :host {\n                /* Allow other elems to be inside */\n                position: relative;\n                top: 0;\n                left: 0;\n                display: block;\n            \n                /* Normal inline styles */\n            \n                font-size: 0.8rem;\n                font-family: monospace;\n                line-height: 1.2rem;\n                tab-size: 2;\n                caret-color: darkgrey;\n                white-space: pre;\n                overflow: hidden;\n            }\n            \n            textarea, ${ this._styledBlock } {\n                /* Both elements need the same text and space styling so they are directly on top of each other */\n                margin: 0px !important;\n                padding-top: var(--vertical-padding, 1.5rem) !important;\n                padding-bottom: var(--vertical-padding, 1.5rem) !important;\n                padding-left: var(--horizontal-padding, 1rem) !important;\n                padding-right: var(--horizontal-padding, 1rem) !important;\n                border: 0 !important;\n                width: 100% !important;\n                height: 100% !important;\n            }\n            ${ this._styledBlock === 'code' ? 'pre' : 'code' } {\n                margin: 0px !important;\n                border: 0px !important;\n                padding: 0px !important;\n                overflow: auto !important;\n                width: 100% !important;\n                height: 100% !important;\n            }\n            .line-numbers :is(textarea, pre[class*=language-]) {\n                padding-left:3.8rem !important;\n            }\n            textarea, pre, pre * {\n                /* Also add text styles to highlighing tokens */\n                font-size: inherit !important;\n                font-family: inherit !important;\n                line-height: inherit !important;\n                tab-size: inherit !important;\n            }\n            \n            \n            textarea, pre {\n                /* In the same place */\n                position: absolute;\n                top: 0;\n                left: 0;\n            }\n            textarea[disabled] {\n                pointer-events: none !important;\n            }\n            \n            \n            /* Move the textarea in front of the result */\n            \n            textarea {\n                z-index: 1;\n            }\n            pre {\n                z-index: 0;\n            }\n            \n            \n            /* Make textarea almost completely transparent */\n            \n            textarea {\n                color: transparent;\n                background: transparent;\n                caret-color: inherit!important; /* Or choose your favourite color */\n            }\n            \n            /* Can be scrolled */\n            textarea, pre {\n                overflow: auto !important;\n            \n                white-space: inherit !important;\n                word-spacing: normal !important;\n                word-break: normal !important;\n                word-wrap: normal !important;\n            }\n            \n            /* No resize on textarea; stop outline */\n            textarea {\n                resize: none;\n                outline: none !important;\n            }\n            .line-numbers-rows {\n                border: none !important;\n                color: dimgray !important;\n            }\n            `,\n        ]\n    }\n\n}\n","\n/**\n * @Path\n */\nexport default Interactable => class extends ( Interactable || class {} ) {\n\n    setStateCallback( type, state, value, duration = 100, callback ) {\n        if ( !this._timeouts ) {\n            this._timeouts = {};\n        }\n        if ( !( type in this._timeouts ) ) {\n            this._timeouts[ type ] = [];\n        }\n        if ( value ) {\n            if ( !this._timeouts[ type ].length ) {\n                callback();\n            }\n            if ( duration ) {\n                this._timeouts[ type ].unshift( setTimeout( () => this.setState( type, state, false ), duration ) );\n            } else {\n                this._timeouts[ type ].unshift( null );\n            }\n            if ( this._related ) {\n                this._related.setState( type, state, true, duration );\n            }\n        } else {\n            this._timeouts[ type ].shift();\n            if ( !this._timeouts[ type ].length ) {\n                callback();\n                if ( this._related ) {\n                    this._related.setState( type, state, false );\n                }\n            }\n        }\n    }\n\n}","/**\n * @imports\n */\nimport Interactable from './Interactable.js';\n\n/**\n * @Ref\n */\nexport default class Ref extends Interactable() {\n\n    bind( binding ) {\n        Object.assign( this, binding );\n\n        this.fullPaths = [];\n        this.$fullPaths = [];\n        if ( this.ownerProduction.assignee ) {\n            this.ownerProduction.assignee.refs.forEach( ref => {\n                if ( !ref.depth ) return;\n                this.fullPaths.push( [ ...this.path, ...ref.depth ] );\n            } );\n        }\n        if ( !this.fullPaths.length ) {\n            this.fullPaths = [ this.path ];\n        }\n\n        this.fullPaths.forEach( ( fullPath, pathIndex ) => {\n            this.$fullPaths.push( fullPath.map( element => ( 'memoId' in element ) ? `[[computed]]` : element.name ).join( '.' ) );\n            \n            fullPath.forEach( element => {\n                element.anchor.classList.add( 'ref-identifier' );\n                element.anchor.classList.add( this.subscriptions ? 'affected' : 'cause' );\n                let existingTitle = element.anchor.getAttribute( `title` );\n                let currentTitle = '> ' \n                    + this.$fullPaths[ pathIndex ] \n                    + ( this.subscriptions ? ' (Creates a signal)' : ' (Receives a signal)' );\n                element.anchor.setAttribute( `title`, existingTitle ? existingTitle + \"\\n\" + currentTitle : currentTitle );\n            });\n\n            this._on( pathIndex, 'mouseenter', () => {\n                this._setState( pathIndex, 'path', 'hover', true, 0 );\n            } )._on( pathIndex, 'mouseleave', () => {\n                this._setState( pathIndex, 'path', 'hover', false );\n            } );\n\n            if ( this.subscriptions ) {\n                this._on( pathIndex, 'click', () => {\n                    this.ownerProduction.ownerEffect.signal( fullPath );\n                } );\n            }\n        } );\n    }\n\n    _setState( pathIndex, type, state, value, duration = 100 ) {\n        this.setStateCallback( pathIndex + '|' + type, state, value, duration, () => {\n            if ( value ) {\n                this.fullPaths[ pathIndex ].forEach( element => element.anchor.classList.add( `${ type }-${ state }` ) );\n            } else {\n                this.fullPaths[ pathIndex ].forEach( element => element.anchor.classList.remove( `${ type }-${ state }` ) );\n            }\n        } );\n    }\n\n    setState( type, state, value, duration = 100 ) {\n        let [ _index, _type ] = type.split( '|' );\n        if ( _type !== undefined ) {\n            return this._setState( _index, _type, state, value, duration );\n        }\n        this.fullPaths.forEach( ( p, i ) => {\n            this._setState( i, type, state, value, duration );\n        } );\n    }\n\n    _on( pathIndex, eventName, callback ) {\n        this.fullPaths[ pathIndex ].forEach( pathElement => pathElement.anchor.addEventListener( eventName, callback.bind( this ) ) );\n        return this;\n    }\n\n    on( eventName, callback ) {\n        this.fullPaths.forEach( ( p, i ) => {\n            this._on( i, eventName, callback );\n        } );\n    }\n}","/**\n * @imports\n */\nimport Interactable from './Interactable.js';\nimport Ref from './Ref.js';\n\n/**\n * @Path\n */\nexport default class Effect extends Interactable( HTMLElement ) {\n\n    bind( binding ) {\n        Object.assign( this, binding );\n        if ( !this.graph ) return;\n        \n        if ( this.childEffects ) {\n            this.childEffects.forEach( childEffect => {\n                childEffect.replaceWith( ...childEffect.childNodes );\n            } );\n        }\n        this.childEffects = new Map;\n        this._textNodes = this.getTextNodes();\n        for ( let effectId in this.graph.childEffects ) {\n            let graph = this.graph.childEffects[ effectId ];\n            let childInstance = this.createChildEffect( { parentEffect: this, graph } );\n            this.childEffects.set( graph.id, childInstance );\n        }\n\n        this.affecteds = new Map;\n        this.causes = new Map;\n        if ( this.refAnchors ) {\n            for ( let anchorId in this.refAnchors ) {\n                let anchor = this.refAnchors[ anchorId ];\n                anchor.replaceWith( ...anchor.childNodes );\n            }\n        }\n        this.refAnchors = {};\n        this._textNodes = this.getTextNodes();\n        const renderRefs = type => {\n            for ( let productionId in this.graph[ type ] ) {\n                let productionInstance = this.createProduction( { ownerEffect: this, ...this.graph[ type ][ productionId ] } );\n                this[ type ].set( productionId, productionInstance );\n            }\n        };\n        renderRefs( 'affecteds' );\n        renderRefs( 'causes' );\n\n        this.on( 'mouseenter', () => {\n            this.setState( 'block', 'hover', true, 0 );\n        } ).on( 'mouseleave', () => {\n            this.setState( 'block', 'hover', false );\n        } );\n        this.observe( ( event, refs ) => {\n            this.setState( 'block', 'runtime-active', true, 100 );\n            refs.forEach( ref => {\n                let productionInstance = this.causes.get( ref.productionId + '' );\n                if ( !productionInstance ) return;\n                productionInstance.refs.get( ref.id ).setState( 'path', 'runtime-active', true, 100 );\n            } );\n        } );\n    }\n\n    get program() {\n        if ( this.parentEffect ) return this.parentEffect.program;\n        return this.runtime;\n    }\n\n    signal( ...refs ) {\n        let runtimeEffect = this.program.locate( this.graph.lineage );\n        if ( !runtimeEffect ) return;\n        return runtimeEffect.signal( ...refs );\n    }\n\n    observe( callback ) {\n        return this.program.observe( this.graph.lineage, callback );\n    }\n\n    createChildEffect( childBinding ) {\n        let childInstance = document.createElement( 'subscript-effect' );\n        this.insertNode( childInstance, childBinding.graph.loc, 'effect' );\n        childInstance.bind( childBinding );\n        return childInstance;\n    }\n\n    createProduction( productionBinding ) {\n        let productionInstance = { ...productionBinding, refs: new Map };\n        if ( 'assignee' in productionBinding ) {\n            productionInstance.assignee = this.affecteds.get( productionBinding.assignee + '' );\n        }\n        for ( let refDef of productionBinding.refs ) {\n            let refInstance = this.createRef( { ownerProduction: productionInstance, ...refDef } );\n            productionInstance.refs.set( refDef.id, refInstance );\n        }\n        return productionInstance;\n    }\n\n    createRef( refBinding ) {\n        let refInstance = new Ref;\n        const createAnchor = element => {\n            let [ start, end ] = element.loc, anchorId = start + '-' + end;\n            let anchor = this.refAnchors[ anchorId ];\n            if ( !anchor ) {\n                anchor = document.createElement( 'span' );\n                this.insertNode( anchor, [ start, end ], 'ref' );\n                this.refAnchors[ anchorId ] = anchor;\n            }\n            return anchor;\n        };\n        refBinding = { ...refBinding, path: refBinding.path.map( element => {\n            let anchor = createAnchor( element );\n            return { anchor, ...element };\n        } ), };\n        if ( refBinding.depth ) {\n            refBinding.depth = refBinding.depth.map( element => {\n                let anchor = createAnchor( element );\n                return { anchor, ...element };\n            } );\n        }\n        refInstance.bind( refBinding );\n        return refInstance;\n    }\n\n    insertNode( node, loc, type ) {\n        let [ start, end ] = loc;\n        let ownLocStart = this.graph.loc ? this.graph.loc[ 0 ] : 0;\n        let [ startOffsetNode, startOffset ] = this.resolveOffset( start - ownLocStart ),\n            [ endOffsetNode, endOffset ] = this.resolveOffset( end - ownLocStart, false );\n        let range = new Range;\n        if ( type === 'effect' ) {\n            if ( startOffset === 0 \n            && startOffsetNode.parentNode.nodeName === 'SPAN'  ) {\n                range.setStartBefore( startOffsetNode.parentNode );\n            } else {\n                range.setStart( startOffsetNode, startOffset );\n            }\n            if ( endOffset === ( endOffsetNode.nodeValue || '' ).length \n            && endOffsetNode.parentNode.nodeName === 'SPAN' ) {\n                range.setEndAfter( endOffsetNode.parentNode );\n            } else {\n                range.setEnd( endOffsetNode, endOffset );\n            }\n        } else {\n            range.setStart( startOffsetNode, startOffset );\n            range.setEnd( endOffsetNode, endOffset );\n        }\n        range.surroundContents( node );\n        return node;\n    }\n\n    resolveOffset( offset, isStart = true ) {\n        return this._textNodes.reduce( ( [ prevNodeDef, final, prevSum ], nodeDef ) => {\n            if ( final === null ) {\n                let currentSum = prevSum + nodeDef.length;\n                if ( offset <= currentSum && !nodeDef.isBlank ) {\n                    let subOffset = offset - prevSum;\n                    if ( !isStart && subOffset === 0 ) {\n                        // We must not end at the start of a text node\n                        return [ prevNodeDef.node, prevNodeDef.length ];\n                    }\n                    if ( ( !isStart || subOffset < nodeDef.length ) ) {\n                        // We're sure not starting at the end of a text node\n                        return [ nodeDef.node, subOffset ];\n                    }\n                }\n                [ prevNodeDef, final, prevSum ] = [ nodeDef, final, currentSum ];\n            }\n            return [ prevNodeDef, final, prevSum ];\n        }, [ null, null, 0 ] );\n    }\n\n    getTextNodes( from = this ) {\n        let rejectScriptTextFilter = {\n            acceptNode: function( node ) {\n                if ( node.parentNode.nodeName === 'SCRIPT' ) return;\n                return window.NodeFilter.FILTER_ACCEPT;\n            }\n        };\n        let walker = window.document.createTreeWalker( from || this, window.NodeFilter.SHOW_TEXT, rejectScriptTextFilter, false );\n        let textNodes = [], node;\n        while( node = walker.nextNode() ) {\n            let textContent = node.nodeValue || '';\n            textNodes.push( { node, length: textContent.length, isBlank: textContent.trim().length === 0 } );\n        }\n        return textNodes;\n    }\n\n    setState( type, state, value, duration = 100 ) {\n        if ( value && this.parentEffect ) {\n            this.parentEffect.setState( type, state, false );\n        }\n        this.setStateCallback( type, state, value, duration, () => {\n            if ( value ) {\n                this.classList.add( `${ type }-${ state }` );\n            } else {\n                this.classList.remove( `${ type }-${ state }` );\n            }\n        } );\n    }\n\n    on( eventName, callback ) {\n        this.addEventListener( eventName, callback.bind( this ) );\n        return this;\n    }\n\n}","\n/**\n * @imports\n */\nimport CodeBlock from './CodeBlock.js';\nimport Effect from './Effect.js';\n\n/**\n * @Console\n */\nexport default class Console extends CodeBlock( Effect ) {\n\n    bind( subscriptFunction, autoRender = true ) {\n        if ( autoRender ) {\n            // Sets both textarea and codeBlock\n            this.innerHTML = subscriptFunction.originalSource;\n        }\n        setTimeout( () => {\n            if ( !this._codeBlock.textContent.length ) return;\n            let runtime = subscriptFunction.runtime;\n            super.bind( { runtime, graph: runtime.graph } );\n        }, 0 );\n    }\n\n    createRef( refBinding ) { }\n\n    getTextNodes( from = null ) {\n        return super.getTextNodes( from || this._codeBlock );\n    }\n\n    /**\n     * ----------\n     *  CSS\n     * ----------\n     */\n\n    get css() {\n        return super.css.concat([\n            `\n            .ref-identifier:is(.path-hover, .path-runtime-active) {\n                text-decoration: underline;\n            }\n            .ref-identifier:is(.path-runtime-active) {\n            }\n\n            .ref-identifier.cause {\n                cursor: default;\n            }\n\n            .ref-identifier.affected {\n                cursor: pointer;\n            }\n\n            .ref-identifier.cause:is(.path-hover, .path-runtime-active) {\n                color: aqua;\n            }\n            .token.keyword .ref-identifier.cause:is(.path-hover, .path-runtime-active) {\n                color: mediumturquoise;\n            }\n            \n            .ref-identifier.affected:is(.path-hover, .path-runtime-active) {\n                color: yellowgreen;\n            }\n\n            .ref-identifier.cause.affected:is(.path-hover, .path-runtime-active) {\n                color: lightgreen;\n            }\n\n            subscript-effect.block-hover,\n            subscript-effect.block-runtime-active {\n                outline: 1px dashed gray;\n                outline-offset: 0.1rem;\n                border-radius: 0.1rem;\n                /*\n                background-color: darkblue;\n                */\n            }\n            subscript-effect.block-runtime-active {\n                background-color: rgba(100, 100, 100, 0.35);\n            }\n            `\n        ]);\n    }\n\n}","\n/**\n * @imports\n */\nimport CodeBlock from './CodeBlock.js';\nimport Console from './Console.js';\nimport Effect from './Effect.js';\n\n/**\n * @define\n */\ncustomElements.define( 'subscript-codeblock', CodeBlock() );\ncustomElements.define( 'subscript-console', Console );\ncustomElements.define( 'subscript-effect', Effect );","\n/**\n * @normalizeTabs\n */\nexport  function normalizeTabs( rawSource ) {\n    let rawSourceSplit = rawSource.split(/\\n/g);\n    if ( rawSourceSplit.length > 1 ) {\n        let possibleBodyIndentLevel = rawSourceSplit[ 1 ].split(/[^\\s]/)[0].length;\n        if ( possibleBodyIndentLevel ) {\n            return rawSourceSplit.map( ( line, i ) => {\n                if ( !i ) return line;\n                let possibleIndent = line.substring( 0, possibleBodyIndentLevel );\n                if ( !possibleIndent.trim().length ) {\n                    return line.substring( possibleBodyIndentLevel );\n                }\n                // Last line?\n                if ( possibleIndent.trim() === '}' && i === rawSourceSplit.length - 1 ) {\n                    return '}';\n                }\n                return line;\n            } ).join( \"\\n\" );\n        }\n    }\n    return rawSource;\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","\n/**\n * @imports\n */\nimport Base from './Base.js';\nimport './index.js';\n\n/**\n * @Console2\n */\nexport default class Inspector extends Base( HTMLElement ) {\n\n    connectedCallback() {\n        this._contentSlot = document.createElement( 'slot' );\n        // ----------------\n        this.shadowRoot.append( this._contentSlot );\n        // ----------------\n        super.connectedCallback();\n        this._contentSlot.addEventListener( 'slotchange', () => {\n            setTimeout( () => { // Allow embedded script in slotted elements to manifest\n                let subscriptElement = this._contentSlot.assignedNodes().reduce( ( _subscriptElement, node ) => _subscriptElement || ( node.subscriptConsole instanceof Map ? node : null), null );\n                if ( subscriptElement ) {\n                    this.inspectElement( subscriptElement );\n                }\n            }, 0 );\n        } );\n    }\n\n    inspectElement( subscriptElement ) {\n        if ( this.consoleElement ) {\n            this.consoleElement.remove();\n            this.controlsElement.remove();\n        }\n        this.consoleElement = document.createElement( 'subscript-console' );\n        this.controlsElement = document.createElement( 'div' );\n        this.controlsElement.classList.add( 'controls-element' );\n        // ----------------\n        this.shadowRoot.append( this.consoleElement, this.controlsElement );\n        // ----------------\n        this.buttons = {};\n        subscriptElement.subscriptConsole.forEach( ( subscriptFunction, id ) => {\n            let title = typeof id === 'number' ? `<${ id }>()` : `${ id }()`;\n            this.buttons[ id ] = this.controlsElement.appendChild( document.createElement( 'button' ) );\n            this.buttons[ id ].setAttribute( 'script-id', id );\n            this.buttons[ id ].setAttribute( 'title',  title );\n            let textElement = this.buttons[ id ].appendChild( document.createElement( 'span' ) );\n            textElement.append( ' ',  title );\n            let iconElement = this.buttons[ id ].appendChild( document.createElement( 'i' ) );\n            let iconClasses = this.getAttribute( `data-icons` ) || `bi bi-braces`;\n            iconClasses.split( ' ' ).map( str => str.trim() ).forEach( str => iconElement.classList.add( str ) );\n            this.buttons[ id ].addEventListener( 'click', e => {\n                if ( this.active ) {\n                    this.active.classList.remove( 'active' );\n                }\n                this.active = this.buttons[ id ];\n                this.active.classList.add( 'active' );\n                this.inspectFunction( subscriptFunction );\n            } );\n        } );\n    }\n\n    inspectFunction( subscriptFunction ) {\n        if ( !subscriptFunction ) {\n            let buttins = Object.keys( this.buttons );\n            if ( buttins.length ) {\n                let firstButton = this.buttons[ buttins[ 0 ] ];\n                let event = new MouseEvent( 'click', {\n                    view: window,\n                    bubbles: true,\n                    cancelable: true\n                } );\n                firstButton.dispatchEvent( event );\n            }\n            return;\n        };\n        this.consoleElement.bind( subscriptFunction );\n    }\n\n    /**\n     * ----------\n     *  CSS\n     * ----------\n     */\n\n     get css() {\n        return [\n            `https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css`,\n            `\n            * {\n                -webkit-box-sizing: border-box;\n                -moz-box-sizing: border-box;\n                box-sizing: border-box;\n            }\n            :host {\n                position: relative;\n                display: block;\n                background-color: rgb(75, 75, 75);\n            }\n            .controls-element {\n                position: relative;\n                z-index: 10;\n            }\n            .controls-element button {\n                display: inline-flex;\n                align-items: center;\n                background-color: transparent;\n                padding: 0.5rem 1rem;\n                border: none;\n                color: silver;\n            }\n            .controls-element button:is(:hover, .active) {\n                background-color: dimgray;\n                color: gainsboro;\n            }\n            .controls-element button .bi {\n                margin-left: 0.5rem;\n            }\n            `,\n        ]\n    }\n\n}\n\ncustomElements.define( 'subscript-inspector', Inspector );\n"],"names":["Element","constructor","super","this","attachShadow","mode","connectedCallback","concat","css","forEach","includes","shadowRoot","appendChild","document","createElement","textContent","cssElement","setAttribute","CodeBlock","Base","HTMLElement","observedAttributes","_lang","_editable","getAttribute","_styledBlock","_div","_preBlock","_codeBlock","classList","add","_contentSlot","_initialSlotEvent","addEventListener","html","assignedNodes","reduce","_html","node","outerHTML","nodeValue","trimStart","_textarea","value","source","replace","RegExp","escape","_addEditor","append","text","endsWith","innerHTML","_highlightCodeBlock","_syncScrolling","name","_name","newValue","placeholder","_placeholder","editable","spellcheck","_scrollBlock","e","target","_handleTabKeyEvent","key","preventDefault","selectionStart","selectionEnd","beforeSelection","slice","afterSelection","length","cursorLocation","lines","split","letter_i","numberIndents","firstLineIndents","i","shiftKey","join","scrollTop","scrollLeft","Prism","highlightElement","disconnectedCallback","Array","from","childNodes","remove","attributeChangedCallback","oldValue","disabled","focus","Interactable","setStateCallback","type","state","duration","callback","_timeouts","unshift","setTimeout","setState","_related","shift","Ref","bind","binding","Object","assign","fullPaths","$fullPaths","ownerProduction","assignee","refs","ref","depth","push","path","fullPath","pathIndex","map","element","anchor","subscriptions","existingTitle","currentTitle","_on","_setState","ownerEffect","signal","_index","_type","undefined","p","eventName","pathElement","on","Effect","graph","childEffects","childEffect","replaceWith","Map","_textNodes","getTextNodes","effectId","childInstance","createChildEffect","parentEffect","set","id","affecteds","causes","refAnchors","anchorId","renderRefs","productionId","productionInstance","createProduction","observe","event","get","program","runtime","runtimeEffect","locate","lineage","childBinding","insertNode","loc","productionBinding","refDef","refInstance","createRef","refBinding","createAnchor","start","end","ownLocStart","startOffsetNode","startOffset","resolveOffset","endOffsetNode","endOffset","range","Range","parentNode","nodeName","setStartBefore","setStart","setEndAfter","setEnd","surroundContents","offset","isStart","prevNodeDef","final","prevSum","nodeDef","currentSum","isBlank","subOffset","rejectScriptTextFilter","acceptNode","window","NodeFilter","FILTER_ACCEPT","walker","createTreeWalker","SHOW_TEXT","textNodes","nextNode","trim","Console","subscriptFunction","autoRender","originalSource","customElements","define","normalizeTabs","rawSource","rawSourceSplit","possibleBodyIndentLevel","line","possibleIndent","substring","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","d","definition","o","defineProperty","enumerable","obj","prop","prototype","hasOwnProperty","call","Inspector","subscriptElement","_subscriptElement","subscriptConsole","inspectElement","consoleElement","controlsElement","buttons","title","iconElement","str","active","inspectFunction","buttins","keys","firstButton","MouseEvent","view","bubbles","cancelable","dispatchEvent"],"sourceRoot":""}